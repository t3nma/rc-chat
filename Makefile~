PROGRAM=./chat

all: $(PROGRAM)

$(PROGRAM): scanner.l parser.y common.h ast.h
	bison -d -v parser.y
	flex -o scanner.c scanner.l
	gcc -o $(PROGRAM) parser.tab.c scanner.c ast.c -lfl

clean:
	rm -f $(PROGRAM) parser.tab.* parser.output scanner.c

test:
	$(PROGRAM) $(TEST_DIR)/test.go
	$(PROGRAM) $(TEST_DIR)/test1.go
	$(PROGRAM) $(TEST_DIR)/test2.go
	$(PROGRAM) $(TEST_DIR)/test3.go
	$(PROGRAM) $(TEST_DIR)/test4.go
	$(PROGRAM) $(TEST_DIR)/test5.go
	$(PROGRAM) $(TEST_DIR)/test6.go
	$(PROGRAM) $(TEST_DIR)/test7.go
	$(PROGRAM) $(TEST_DIR)/test8.go
	$(PROGRAM) $(TEST_DIR)/test9.go

